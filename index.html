<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>豊洲住みママ達がおすすめする塾ランキング</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="canonical" href="index_Version18_with_reviews_3snippets_typoUp_vf_blogger_author-notes_Version4_Version16_Version8.html">
  <script>location.replace('index_Version18_with_reviews_3snippets_typoUp_vf_blogger_author-notes_Version4_Version16_Version8.html');</script>
</head>
<body>
  <p>自動的に移動します。移動しない場合は <a href="index_Version18_with_reviews_3snippets_typoUp_vf_blogger_author-notes_Version4_Version16_Version8.html">こちら</a> をクリックしてください。</p>
</body>
</html>
</head>
<body>
<header class="site-header">
  <div class="container">
    <div class="header-flex">
      <div class="logo">
        <div class="logo-badge" aria-hidden="true">👩‍👧‍👦</div>
        <div>
          <h1 class="site-title">豊洲住みママ達がおすすめする塾ランキング</h1>
          <p class="tagline">豊洲のママが書いてます！公式＋口コミで比べやすい“縦一列ランキング”</p>
        </div>
      </div>
      <!-- ランキングを見る！ボタンを削除 -->
    </div>
    <!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>豊洲の塾おすすめランキング2025｜小・中・高別比較【口コミあり】</title>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="description" content="豊洲在住のママが、わが家の塾探しメモと口コミをぎゅっとまとめました！公式情報＋最新口コミ3件で“いま”が分かる、スマホで見やすい縦一列ランキングです。">
<meta name="theme-color" content="#ff8a5c">
<meta name="author" content="豊洲のママ">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300..900&family=M+PLUS+Rounded+1c:wght@300..900&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#ff8a5c;--brand-soft:#ffe3d5;--brand-dark:#703b21;
  --bg:#faf8f6;--panel:#ffffff;--border:#e6e2dd;
  --text:#2f2d2a;--sub:#6f645b;--muted:#8a827a;
  --shadow:0 1px 3px rgba(0,0,0,.08),0 0 0 1px #00000008;
  --rounded:"M PLUS Rounded 1c","Noto Sans JP",system-ui,sans-serif;
  --sans:"Noto Sans JP","M PLUS Rounded 1c",system-ui,sans-serif;
  --tierA1:#ffb86b; --tierA2:#ffc78f;
  --tierB1:#55b798; --tierB2:#72d2b7;
  --tierC1:#9aa4f7; --tierC2:#b9c2ff;
  font-size:17.2px;
}
@media (max-width:640px){:root{font-size:16.8px}}
@media (max-width:480px){:root{font-size:16.4px}}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:var(--sans);font-weight:500;line-height:1.55;-webkit-font-smoothing:antialiased;font-synthesis:none;text-rendering:optimizeLegibility}
h1,h2,h3{margin:0;font-family:var(--rounded);font-weight:850;line-height:1.22;letter-spacing:.01em}
button{font:inherit;cursor:pointer}
img{display:block;max-width:100%;height:auto}
a{text-decoration:none;color:var(--brand)}
a:focus-visible,button:focus-visible{outline:2px solid #ffb28f;outline-offset:2px}

/* Layout */
.container{width:100%;max-width:880px;margin-inline:auto;padding-inline:clamp(14px,4vw,34px)}
header.site-header{padding:18px 0 22px;background:linear-gradient(130deg,#ffe1d2,#ffd5e3 48%,#f4e9ff);position:static;z-index:60;backdrop-filter:saturate(1.4) blur(12px)}
.header-flex{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap}
.logo{display:flex;align-items:center;gap:1rem}
.logo-badge{width:64px;height:64px;border-radius:50%;background:#fff;display:grid;place-items:center;font-size:2.05rem;box-shadow:0 6px 22px -8px rgba(0,0,0,.35)}
.site-title{font-size:clamp(1.55rem,5.6vw,2.35rem);letter-spacing:.02em;background:linear-gradient(90deg,#ff8a5c,#ff996f 55%,#ffb390);-webkit-background-clip:text;color:transparent;font-weight:900}
.tagline{margin:.35rem 0 0;font-size:.82rem;color:var(--sub);letter-spacing:.06em;font-weight:680}
.hero-lead{margin:.85rem 0 .65rem;font-size:clamp(.92rem,2.3vw,1rem);line-height:1.7;max-width:780px;font-weight:520}
.top-actions{display:flex;gap:.8rem;flex-wrap:wrap}
.top-btn{display:inline-flex;align-items:center;gap:.55rem;background:#fff;border:1px solid var(--border);color:var(--brand-dark);padding:.72rem 1.15rem;font-size:.78rem;font-weight:760;border-radius:999px;box-shadow:0 8px 22px -10px rgba(0,0,0,.2),0 0 0 1px #00000006;transition:.25s;line-height:1}
.top-btn.primary{background:var(--brand);color:#fff;border-color:var(--brand);box-shadow:0 8px 24px -10px #ff8a5c90}
.top-btn .icon{font-size:1rem}
.top-btn:hover{background:var(--brand-soft)}
.top-btn.primary:hover{filter:brightness(.95)}

/* Blogger Intro/Outro */
.author-intro{margin:.8rem 0 0;background:linear-gradient(180deg,#fff,#fff7f2);border:1px solid var(--border);border-radius:20px;padding:1rem 1.05rem;box-shadow:var(--shadow);display:flex;gap:.85rem;align-items:flex-start}
.author-avatar{width:58px;height:58px;border-radius:50%;background:#fff;display:grid;place-items:center;box-shadow:0 6px 20px -10px rgba(0,0,0,.4);font-size:1.45rem;flex:0 0 58px}
.author-text{display:flex;flex-direction:column;gap:.28rem}
.author-text .by{font-size:.82rem;font-weight:800;color:#5b4a42;letter-spacing:.02em}
.author-text .desc{font-size:.82rem;line-height:1.7;color:#574e48}
.author-text .desc b{font-weight:820}
@media (max-width:520px){.author-intro{padding:.8rem .9rem}.author-avatar{width:52px;height:52px;font-size:1.35rem}.author-text .by{font-size:.8rem}.author-text .desc{font-size:.8rem}}

/* Filters */
.filters-wrap{margin:1.05rem 0 1.25rem;background:var(--panel);border:1px solid var(--border);border-radius:30px;padding:1.05rem 1.25rem 1.3rem;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:1.05rem}
.filters-grid{display:grid;gap:1.15rem;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
fieldset{border:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.55rem}
legend{font-size:.75rem;letter-spacing:.12em;font-weight:820;color:var(--muted);text-transform:uppercase;display:flex;align-items:center;gap:.4rem}
legend .icon{font-size:1rem}
.chip-row{display:flex;flex-wrap:wrap;gap:.6rem}
.chip{font:inherit;font-size:.78rem;padding:.66rem 1.08rem;border:1px solid var(--border);background:#fff;border-radius:999px;font-weight:760;letter-spacing:.02em;cursor:pointer;line-height:1;transition:.2s;box-shadow:0 2px 10px -8px rgba(0,0,0,.4)}
.chip:hover{background:var(--brand-soft)}
.chip.active{背景:var(--brand);color:#fff;border-color:var(--brand);box-shadow:0 0 0 2px #ffc3aa,inset 0 -2px 0 #00000010}

/* Meta line */
.meta-line{font-size:.76rem;color:var(--muted);line-height:1.5;margin-top:-.3rem}

/* List / Card */
.list{display:flex;flex-direction:column;gap:clamp(1.05rem,2.6vw,1.35rem);margin:0 0 1.6rem}
.card{position:relative;background:var(--panel);border:1px solid var(--border);border-radius:30px;padding:clamp(1.15rem,3.2vw,1.55rem) clamp(1.1rem,3.4vw,1.6rem) 1.4rem;display:flex;flex-direction:column;gap:.95rem;box-shadow:0 8px 26px -14px rgba(0,0,0,.28),0 0 0 1px #00000005;transition:.32s}
/* rank-colored left stripe */
.card::before{content:"";position:absolute;left:0;top:0;bottom:0;width:8px;border-radius:30px 0 0 30px;opacity:.95}
.card[data-tier="S"]::before{background:linear-gradient(180deg,#ff8a5c,#ffb283)}
.card[data-tier="A"]::before{background:linear-gradient(180deg,var(--tierA1),var(--tierA2))}
.card[data-tier="B"]::before{background:linear-gradient(180deg,var(--tierB1),var(--tierB2))}
.card[data-tier="C"]::before{background:linear-gradient(180deg,var(--tierC1),var(--tierC2))}
.card[data-tier="A"]{border-color:#ffd7bd}
.card[data-tier="B"]{border-color:#cfeee3}
.card[data-tier="C"]{border-color:#e3e1ed}

.card:hover{transform:translateY(-4px);box-shadow:0 14px 36px -14px rgba(0,0,0,.35),0 0 0 1px #00000010}
.card.clickable{cursor:pointer}

/* Rank badge（そのまま） */
.rank-badge{position:absolute;top:.9rem;left:.9rem;background:var(--brand);color:#fff;font-weight:820;font-size:1.05rem;padding:.68rem 1rem;border-radius:20px;display:flex;flex-direction:column;gap:6px;min-width:82px;letter-spacing:.03em;line-height:1;box-shadow:0 8px 20px -8px #ff8a5c90;z-index:3}
.rank-badge .rank-num{display:flex;align-items:center;gap:.42rem}
.rank-badge .crown{filter:drop-shadow(0 2px 0 rgba(0,0,0,.1))}
.rank-badge small{font-size:.72rem;font-weight:620;opacity:.95;background:#ffffff2a;padding:4px 8px;border-radius:10px}
.rank-top-3{background:linear-gradient(135deg,#ff8a5c,#ffb283 45%,#ff9f6c)}
.card[data-tier="A"] .rank-badge{background:linear-gradient(135deg,var(--tierA1),var(--tierA2))}
.card[data-tier="B"] .rank-badge{background:linear-gradient(135deg,var(--tierB1),var(--tierB2))}
.card[data-tier="C"] .rank-badge{background:linear-gradient(135deg,var(--tierC1),var(--tierC2))}

/* Thumbnail */
.thumb-wrap{width:100%;aspect-ratio:20/9;max-height:230px;border-radius:22px;background:#f4f1ed;overflow:hidden;box-shadow:0 0 0 1px #00000010;position:relative;z-index:1}
.thumb-wrap img{width:100%;height:100%;object-fit:cover;transform:scale(1.02)}

/* Text hierarchy */
.brand-line{font-size:.82rem;font-weight:780;color:var(--muted);letter-spacing:.05em;margin-top:.15rem;display:flex;align-items:center;gap:.35rem}
.brand-line .dot{opacity:.5}
/* 題名は少し控えめ（前回調整を維持） */
.juku-name{font-size:clamp(1.48rem,5.4vw,2rem);margin:.12rem 0 .34rem;line-height:1.22;letter-spacing:.002em;font-weight:880}
.card.top3 .juku-name{background:linear-gradient(90deg,#3b2b28,#7d4a34 40%,#ff8a5c 90%);-webkit-background-clip:text;color:transparent}

/* Rating row（料金・形態の重複表示は削除済み） */
.rating-row{display:flex;align-items:center;gap:.8rem;font-size:.96rem;font-weight:680;flex-wrap:wrap;margin-top:-.05rem}
.rating-pill{padding:.5em .94em;border-radius:999px;font-size:1.02rem;font-weight:860;line-height:1.05}
.rating-pill[data-level=high]{background:#e2f7ea;color:#1e6c3b}
.rating-pill[data-level=mid]{background:#fff3d6;color:#865400}
.rating-pill[data-level=low]{background:#ffe1e1;color:#b84545}

/* Summary（概要は少し控えめ） */
.summary{font-size:.94rem;line-height:1.85;margin:0;font-weight:520}

/* Author note（本文も少し控えめ） */
.author-note{background:#fff8f4;border:1px solid #f3d3c3;border-radius:14px;padding:.72rem .9rem;display:flex;gap:.7rem;align-items:flex-start;box-shadow:0 2px 14px -10px #ff8a5c66}
.author-note .badge{flex:0 0 auto;background:#fff;border:1px solid #f3d2c3;border-radius:999px;padding:.26rem .7rem;font-size:.8rem;font-weight:840;color:#6a4b3f;line-height:1;display:inline-flex;align-items:center;gap:.4rem}
.author-note .text{font-size:.9rem;line-height:1.85}
.note-edit-btn{background:#fff;border:1px dashed #f3d2c3;color:#6a4b3f;padding:.5rem .76rem;border-radius:12px;font-size:.82rem;font-weight:760}
.note-edit-btn:hover{background:#fff2eb}
.note-inline-editor{margin-top:.55rem;display:flex;flex-direction:column;gap:.55rem}
.note-inline-editor textarea{width:100%;min-height:120px;font:inherit;font-size:.94rem;line-height:1.78;padding:.78rem .9rem;border:1px solid #e6d7ce;border-radius:12px;resize:vertical;background:#fff}
.note-inline-editor .buttons{display:flex;gap:.55rem;flex-wrap:wrap}
.note-inline-editor .btn{background:#fff;border:1px solid var(--border);padding:.56rem .96rem;border-radius:12px;font-size:.86rem;font-weight:800;color:#5f4a40}
.note-inline-editor .btn.primary{border-color:var(--brand);color:#var(--brand)}
.note-inline-editor .btn.danger{border-color:#e0b4aa;color:#a64b3e}
.note-inline-editor .btn:hover{background:#fff7f2}

/* Review snippets */
.review-snippets{display:flex;flex-direction:column;gap:.6rem;margin-top:-.1rem}
.snip{background:#fff8f4;border:1px solid #f3d3c3;padding:.76rem .92rem .76rem 1.12rem;border-radius:16px;font-size:.82rem;line-height:1.7;position:relative}
.snip:before{content:"“";position:absolute;left:9px;top:5px;font-size:1.06rem;color:#e2c7bb;font-weight:800;opacity:.65}
.snip-head{display:flex;flex-wrap:wrap;align-items:center;gap:.6rem;font-size:.7rem;font-weight:760;color:#625651;margin-bottom:.24rem}
.snip-head time{opacity:.7;font-weight:560}
.snip-head .star{background:#fff1ea;border:1px solid #f3d3c3;padding:3px 6px;border-radius:8px;font-size:.62rem;color:#c4451a;font-weight:800;line-height:1}
.snip-body{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}

/* Tags */
.tags{display:flex;flex-wrap:wrap;gap:.6rem;margin-top:.25rem}
.tag{background:#f3eee9;font-size:.82rem;padding:.56em .92em;border-radius:11px;font-weight:780;letter-spacing:.02em;display:inline-flex;gap:.38rem;align-items:center}

/* Specs */
.spec-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:.9rem;margin-top:.32rem}
.spec{background:#faf9f7;border:1px solid #eee9e3;border-radius:16px;padding:.86rem 1rem;font-size:.84rem;display:flex;flex-direction:column;gap:.48rem;line-height:1.5;min-height:88px}
.spec strong{font-weight:840;color:var(--muted);font-size:.9rem;letter-spacing:.04em;display:flex;align-items:center;gap:.42rem}
.spec strong .icon{font-size:1rem}

/* Actions */
.actions{display:flex;flex-wrap:wrap;gap:.85rem;margin-top:.6rem}
.link-btn{font-size:.82rem;padding:.8rem 1.2rem;font-weight:840;border-radius:16px;border:1px solid var(--brand);background:#fff;color:#var(--brand);display:inline-flex;align-items:center;gap:.58rem;line-height:1}
.link-btn .icon{font-size:1rem}
.link-btn:hover{background:var(--brand);color:#fff}
.link-btn.primary{border-color:var(--brand);background:var(--brand);color:#fff}
/* 料金詳細CTAだけ大きめ（塾名より少し小さい） */
.link-btn.cta-pricing{font-size:clamp(1.05rem,4.8vw,1.6rem); padding:.62em 1.1em; border-radius:18px}
.link-btn.cta-pricing .icon{font-size:1.1em}

/* Notices */
.notice{padding:1.2rem 1.35rem;background:#fff6f2;border:1px dashed #ffb89a;border-radius:22px;font-size:.78rem;color:var(--brand-dark);margin:1.55rem 0;display:none}
#loadMoreWrap{display:flex;justify-content:center;margin:1.5rem 0 2.9rem}
#loadMoreBtn{background:#fff;border:1px solid var(--brand);color:#var(--brand);padding:1.05rem 2.4rem;font-size:.9rem;font-weight:850;border-radius:999px;box-shadow:0 8px 22px -10px rgba(255,138,92,.55);letter-spacing:.03em;transition:.25s}
#loadMoreBtn:hover{background:var(--brand);color:#fff}

/* Footer */
footer{padding:2.5rem 0 3.3rem;font-size:.74rem;color:var(--muted);text-align:center;line-height:1.45}

/* Detail Overlay */
.detail-overlay{position:fixed;inset:0;background:#00000055;backdrop-filter:blur(4px);display:none;align-items:flex-end;justify-content:center;z-index:400;padding:0 0 env(safe-area-inset-bottom)}
.detail-panel{width:100%;max-width:880px;background:var(--panel);border-radius:34px 34px 0 0;padding:clamp(1.1rem,2.5vw,1.55rem) clamp(1.1rem,3vw,1.75rem) 1.75rem;box-shadow:0 -8px 30px -12px rgba(0,0,0,.4);max-height:90dvh;display:flex;flex-direction:column;gap:1.25rem;overflow:auto;animation:panelUp .45s cubic-bezier(.65,.05,.36,1)}
@keyframes panelUp{0%{transform:translateY(46px);opacity:0}100%{transform:translateY(0);opacity:1}}
.detail-head{display:flex;align-items:flex-start;justify-content:space-between;gap:1.2rem}
.detail-head h2{margin:0;font-size:clamp(1.25rem,4.6vw,1.75rem);line-height:1.25;letter-spacing:.01em;font-weight:780}
.close-detail{background:#fff;border:1px solid var(--border);padding:.7rem 1.05rem;font-size:.76rem;font-weight:680;border-radius:16px;cursor:pointer}
.close-detail:hover{background:#f4f2f0}
.detail-meta{display:flex;flex-wrap:wrap;gap:.6rem}
.detail-meta .pill{background:#f3eee9;font-size:.72rem;padding:.52em .9em;border-radius:14px;font-weight:680}
.section-title{margin:.15rem 0 .55rem;font-size:clamp(1rem,3.2vw,1.12rem);letter-spacing:.045em;font-weight:750}
.detail-grid{display:grid;gap:.9rem;grid-template-columns:repeat(auto-fit,minmax(190px,1fr))}
.detail-item{background:#faf9f7;border:1px solid #eee9e3;border-radius:16px;padding:.8rem .95rem;font-size:.78rem;display:flex;flex-direction:column;gap:.4rem}
.detail-item strong{font-size:.82rem;color:var(--sub);font-weight:760;letter-spacing:.04em}
.map-wrap{width:100%;aspect-ratio:20/9;max-height:300px;border-radius:22px;overflow:hidden;background:#f1efec;position:relative}
.map-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
.map-skeleton{position:absolute;inset:0;display:grid;place-items:center;font-size:.78rem;color:#f1efec;letter-spacing:.05em}

/* Admin toolbar */
.admin-tools{margin:.2rem 0 1rem;display:none}
.admin-tools .bar{display:flex;flex-wrap:wrap;gap:.5rem;background:#fff;border:1px dashed #f3d2c3;border-radius:14px;padding:.6rem .75rem}
.admin-tools .bar .btn{background:#fff;border:1px solid #e8d8cf;padding:.5rem .85rem;border-radius:10px;font-size:.76rem;font-weight:680;color:#5f4a40}
.admin-tools .bar .btn:hover{background:#fff7f2}

/* Responsive */
@media (max-width:520px){
  .card{padding:1.08rem .98rem 1.2rem}
  .juku-name{font-size:clamp(1.38rem,6.2vw,1.64rem)}
  .summary{font-size:.9rem}
  .snip{font-size:.82rem}
  .thumb-wrap{aspect-ratio:19/9}
  .rank-badge{font-size:.98rem;min-width:78px;padding:.64rem .94rem}
  .brand-line{font-size:.86rem}
  .rating-row{font-size:1rem}
  .rating-pill{font-size:1.06rem}
  .tag{font-size:.86rem}
}
@media (prefers-reduced-motion:reduce){*{animation:none!important;transition:none!important}}
</style>
</head>
<body>
<header class="site-header">
  <div class="container">
    <div class="header-flex">
      <div class="logo">
        <div class="logo-badge" aria-hidden="true">👩‍👧‍👦</div>
        <div>
          <h1 class="site-title">豊洲の塾おすすめランキング2025｜小・中・高別比較【口コミあり】</h1>
          <p class="tagline">豊洲のママが書いてます！公式＋口コミで比べやすい“縦一列ランキング”</p>
        </div>
      </div>
      <!-- ランキングを見る！ボタンを削除 -->
    </div>

    <div class="author-intro" aria-label="サイト運営者の紹介">
      <div class="author-avatar" aria-hidden="true">📝</div>
      <div class="author-text">
        <div class="by">はじめまして、豊洲に住むママです！</div>
        <p class="desc">わが家の塾探しで集めたメモや豊洲のママ友の情報を元に、公式情報と内輪のコメント、評価をプラスして<b>サクッと比較できる形</b>にしてみました。<br>「まずは雰囲気つかみたい…！」という方に、<b>料金・アクセス・口コミ</b>の順で見やすく並べています。参考になればうれしいです♪</p>
      </div>
    </div>

    <!-- ヒーロー文（hero-lead）を削除 -->
  </div>
</header>

<main class="container">
  <div id="adminTools" class="admin-tools" aria-hidden="true">
    <div class="bar">
      <button class="btn" id="exportNotesBtn">一言コメントをJSONで書き出し</button>
      <button class="btn" id="importNotesBtn">JSONを読み込み</button>
      <button class="btn" id="clearNotesBtn">すべて削除</button>
      <span style="font-size:.76rem;color:#6b5a51">編集モード中（?edit=1で表示）</span>
    </div>
  </div>

  <!-- Filters -->
  <section class="filters-wrap" aria-label="絞り込み">
    <form id="filtersForm" onsubmit="return false;">
      <div class="filters-grid">
        <fieldset>
          <legend><span class="icon" aria-hidden="true">🎒</span>学年</legend>
          <div class="chip-row" data-filter="grade">
            <button type="button" class="chip active" data-value="all">すべて</button>
            <button type="button" class="chip" data-value="elementary">小</button>
            <button type="button" class="chip" data-value="junior">中</button>
            <button type="button" class="chip" data-value="high">高</button>
          </div>
        </fieldset>
        <fieldset>
          <legend><span class="icon" aria-hidden="true">🧭</span>指導形態</legend>
          <div class="chip-row" data-filter="type">
            <button type="button" class="chip active" data-value="all">すべて</button>
            <button type="button" class="chip" data-value="個別指導">個別</button>
            <button type="button" class="chip" data-value="集団指導">集団</button>
            <button type="button" class="chip" data-value="少人数指導">少人数</button>
            <button type="button" class="chip" data-value="ハイブリッド">ハイブリ</button>
            <button type="button" class="chip" data-value="映像">映像</button>
          </div>
        </fieldset>
        <fieldset>
          <legend><span class="icon" aria-hidden="true">📍</span>エリア (丁目)</legend>
          <div class="chip-row" data-filter="location">
            <button type="button" class="chip active" data-value="all">全域</button>
            <button type="button" class="chip" data-value="pair12">1・2丁目</button>
            <button type="button" class="chip" data-value="pair34">3・4丁目</button>
            <button type="button" class="chip" data-value="pair56">5・6丁目</button>
          </div>
        </fieldset>
      </div>
    </form>
    <div id="meta" class="meta-line"></div>
  </section>

  <!-- List -->
  <section id="listSection" aria-label="ランキング">
    <div id="list" class="list" role="list" aria-live="polite"></div>
    <div id="noResults" class="notice">ごめんなさい…該当する塾が見つかりませんでした。条件を少しゆるめて、もう一度ためしてみてくださいね！</div>
    <div id="errorBox" class="notice"></div>
    <div id="loadMoreWrap">
      <button id="loadMoreBtn" style="display:none">もっと見る</button>
    </div>
  </section>

  <!-- Blogger outro -->
  <section class="author-outro" aria-label="運営者より">
    <h3>ここまで読んでくれてありがとう！— 豊洲のママより</h3>
    <p class="para">このランキングは、<b>公式サイト・実体験・保護者の声</b>をミックスして、現地よりの視点で作ってます！<br>最新の料金や時間割は変わることもあるので、気になったところは<b>公式サイトも必ずチェック</b>してみてくださいね！</p>
    <div class="sign">
      <span aria-hidden="true">👩‍👧‍👦</span>
      <span>
        運営：豊洲住まい元気ファミリー<br>
        ママ・犬が大好き！アウトドアな専業主婦！<br>
        パパ・ブログを書くことはあまりないが、その分家族を支えてる縁の下の力持ち！<br>
        長男・社会人一年目！35ヵ国訪問経験、語学を活かして、社会人奮闘中！<br>
        次女・絶賛大学生！医学大学在学中で大変な勉強頑張り中！<br>
        三女・青春謳歌中！お兄ちゃんに憧れて海外の大学でやりたい事の為に絶賛勉強中！
      </span>
    </div>
    <p class="mini">家族総出で、運営してるので他のサイトも目を通して頂けたら嬉しいです！</p>
  </section>
</main>

<footer>&copy; 2025 豊洲塾ナビ｜豊洲のママが書いてます！</footer>

<!-- Detail Overlay（残置・通常未使用） -->
<div class="detail-overlay" id="detailOverlay" aria-hidden="true">
  <div class="detail-panel" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
    <div class="detail-head">
      <h2 id="detailTitle"></h2>
      <button class="close-detail" id="closeDetail" aria-label="閉じる">閉じる ✕</button>
    </div>
    <div id="detailMeta" class="detail-meta"></div>
    <div class="map-wrap" id="detailMapWrap">
      <div class="map-skeleton" id="mapSkeleton">マップを読み込み中…少しだけ待ってくださいね！</div>
    </div>
    <section>
      <h3 class="section-title">ざっくり概要</h3>
      <p id="detailSummary" style="font-size:.82rem;line-height:1.7;margin:.25rem 0 .25rem"></p>
    </section>
    <section>
      <h3 class="section-title">基本情報</h3>
      <div class="detail-grid" id="detailGrid"></div>
    </section>
    <section id="detailReviewsSection">
      <h3 class="section-title">みんなの口コミ</h3>
      <div class="review-toolbar">
        <select id="reviewSort">
          <option value="newest">新着順（最近の声から）</option>
          <option value="high">評価が高い順</option>
          <option value="low">評価が低い順</option>
          <option value="long">長文順（じっくり）</option>
        </select>
      </div>
      <div class="review-cards" id="reviewCards"></div>
      <button id="loadMoreReviews" style="display:none">さらに読む</button>
      <div class="empty-reviews" id="emptyReviews" style="display:none">口コミはまだ見つかりませんでした。よかったらまたのぞきに来てくださいね！</div>
    </section>
    <div class="detail-actions" id="detailActions"></div>
  </div>
</div>

<script>
/* ===== ヘルパー ===== */
const $id = (id)=>document.getElementById(id);

/* ===== 設定 ===== */
const EDIT_MODE = new URLSearchParams(location.search).get('edit') === '1';
const NOTE_STORAGE_KEY = 'toyosu_author_notes_v1';

/* ===== データ（30件内蔵） ===== */
const data = [
  { originalRank:1,brand:"栄光ゼミナール",name:"栄光ゼミナール 豊洲校",slug:"eikoh-toyosu",location:"豊洲4丁目",rating:4.2,priceFrom:15200,priceText:"15,200円〜",url:"https://www.eikoh-seminar.com/",grades:["elementary","junior","high"],type:"集団指導",style:["中学受験","自習室"],summary:"難関中を目指すご家庭にぴったり！面倒見の良さが魅力で、宿題や補習の流れも丁寧にフォロー。自習室も使いやすく、親として状況が追いやすいのが安心ポイントです。",access:"駅徒歩5分",img:"https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=600&h=338&fit=crop",reviews:[{author:"保護者A",rating:5,date:"2025-06-05",text:"面談と補習の流れが整理され迷わなくなった。"}, {author:"小6生",rating:4,date:"2025-05-30",text:"宿題は多いけど短冊補習があるので取りこぼしが減る。"}, {author:"保護者B",rating:4,date:"2025-05-22",text:"可視化レポが細かくフォローしやすい。"}] },
  { originalRank:2,brand:"明光義塾",name:"明光義塾 豊洲教室",slug:"meiko-toyosu",location:"豊洲1丁目",rating:4.1,priceFrom:13200,priceText:"13,200円〜",url:"https://www.meikogijuku.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["柔軟","定期対策"],summary:"1対1で柔軟に動けるから、部活や習い事と両立しやすい。面談がこまめで、つまずきに気づくのが早いのも好印象。テスト前だけ強化、みたいな使い方もアリです。",access:"駅徒歩3分",img:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=600&h=338&fit=crop",reviews:[{author:"中2生",rating:4,date:"2025-05-23",text:"学習ログで偏りに気づける。"}, {author:"保護者E",rating:5,date:"2025-06-01",text:"振替制度が部活シーズンに助かった。"}] },
  { originalRank:3,brand:"SAPIX",name:"SAPIX 豊洲校",slug:"sapix-toyosu",location:"豊洲2丁目",rating:4.6,priceFrom:20900,priceText:"20,900円〜",url:"https://www.sapix.co.jp/",grades:["elementary"],type:"集団指導",style:["最難関","演習量"],summary:"とにかく演習量たっぷりで、ハイレベルな思考力が鍛えられます。緊張感はあるけど、伸びる子はグンと伸びるタイプ。最難関志望ならまずはここをチェック。",access:"駅徒歩7分",img:"https://images.unsplash.com/photo-1509062522246-3755977927d7?w=600&h=338&fit=crop",reviews:[{author:"小6生",rating:5,date:"2025-05-31",text:"クラス替えが緊張感を保ってくれる。"}, {author:"保護者H",rating:4,date:"2025-05-18",text:"領域ごとの色分けが復習優先度を明確にしてくれる。"}] },
  { originalRank:4,brand:"東進ハイスクール",name:"東進ハイスクール 豊洲校",slug:"toshin-toyosu",location:"豊洲2丁目",rating:3.9,priceFrom:77000,priceText:"77,000円〜",url:"https://www.toshin.com/",grades:["high"],type:"映像",style:["大学受験","映像授業"],summary:"映像＋担任指導のセットで、苦手な単元を自分のペースで巻き返しやすい。アプリ管理が合う子はどんどん進められる。部活が忙しくても“空き時間学習”がハマれば強いです。",access:"駅直結",img:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600&h=338&fit=crop",reviews:[{author:"高3生",rating:4,date:"2025-06-02",text:"向上得点グラフがペース維持に役立つ。"}] },
  { originalRank:5,brand:"早稲田アカデミー",name:"早稲田アカデミー 豊洲校",slug:"waseda-toyosu",location:"豊洲3丁目",rating:3.7,priceFrom:17600,priceText:"17,600円〜",url:"https://www.waseda-ac.co.jp/",grades:["elementary","junior","high"],type:"集団指導",style:["熱意指導","中学受験"],summary:"熱量高めの授業で、子どものスイッチを入れてくれるタイプ。課題は多めだけど、その分“やり切った感”がつきやすい。雰囲気が合う子は伸びが早い印象です。",access:"駅徒歩8分",img:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=600&h=338&fit=crop",reviews:[{author:"小5生",rating:4,date:"2025-05-14",text:"授業の勢いで眠くならない。"}] },
  { originalRank:6,brand:"個別教室のトライ",name:"個別教室のトライ 豊洲校",slug:"try-toyosu",location:"豊洲1丁目",rating:3.5,priceFrom:16280,priceText:"16,280円〜",url:"https://www.kobekyo.com/",grades:["elementary","junior","high"],type:"個別指導",style:["AI分析","1対1"],summary:"AI診断で弱点を見える化→1対1でピンポイント補強の流れが分かりやすい。理解度に合わせて調整できるから、無理なく継続しやすい。家庭学習の道筋も作りやすいです。",access:"駅徒歩4分",img:"https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=600&h=338&fit=crop",reviews:[{author:"中1生",rating:4,date:"2025-05-16",text:"AI診断の色マップでやることが明確。"}] },
  { originalRank:7,brand:"臨海セミナー",name:"臨海セミナー 豊洲校",slug:"rinkai-toyosu",location:"豊洲2丁目",rating:3.8,priceFrom:13200,priceText:"13,200円〜",url:"https://www.rinkaiseminar.co.jp/",grades:["elementary","junior","high"],type:"集団指導",style:["定期対策","高校受験"],summary:"学校のカリキュラムに寄り添った“定期テスト対策”が強み。直前期の追い込みも手厚く、提出物や勉強計画まで目配り。内申アップを狙うなら候補に入れたい塾。",access:"駅徒歩6分",img:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=600&h=338&fit=crop",reviews:[{author:"中2生",rating:4,date:"2025-05-12",text:"直前講座で主要科が伸びた。"}] },
  { originalRank:8,brand:"四谷学院",name:"四谷学院 豊洲校",slug:"yotsuya-toyosu",location:"豊洲4丁目",rating:3.6,priceFrom:25000,priceText:"25,000円〜",url:"https://www.yotsuyagakuin.com/",grades:["high"],type:"ハイブリッド",style:["大学受験","個別+集団"],summary:"科目別×段階別で、自分のレベルに合わせて一歩ずつ積み上げ。わからない所をそのままにしない設計が安心。難度の凸凹がある子にも合いやすいです。",access:"駅徒歩5分",img:"https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=600&h=338&fit=crop",reviews:[{author:"高2生",rating:4,date:"2025-04-25",text:"段階判定テストが怠け防止になる。"}] },
  { originalRank:9,brand:"森塾",name:"森塾 豊洲校",slug:"morijuku-toyosu",location:"豊洲5丁目",rating:3.4,priceFrom:10800,priceText:"10,800円〜",url:"https://www.morijuku.com/",grades:["elementary","junior","high"],type:"個別指導",style:["学校準拠","基礎固め"],summary:"1対2の個別で、学校の内容を“確実に”定着させるのが得意。基礎を固めたい時期にちょうど良い。料金も穏やかで通わせやすいのが嬉しいところ。",access:"駅徒歩3分",img:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=600&h=338&fit=crop",reviews:[{author:"保護者M",rating:3,date:"2025-04-30",text:"基礎は安定。応用は自宅で補う必要。"}] },
  { originalRank:10,brand:"個別指導塾スタンダード",name:"個別指導塾スタンダード 豊洲校",slug:"standard-toyosu",location:"豊洲2丁目",rating:3.2,priceFrom:8800,priceText:"8,800円〜",url:"https://std-ie.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["低価格","習慣化"],summary:"通いやすい価格で“学習の習慣づけ”にフォーカス。まずは週の勉強リズムを作りたいご家庭に。内容は基礎中心で、はじめの一歩にちょうど良いです。",access:"駅徒歩9分",img:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=600&h=338&fit=crop",reviews:[{author:"保護者N",rating:4,date:"2025-05-05",text:"費用を抑えつつペースが作れた。"}] },
  { originalRank:11,brand:"学研教室",name:"学研教室 豊洲教室",slug:"gakken-toyosu",location:"豊洲6丁目",rating:3.3,priceFrom:8800,priceText:"8,800円〜",url:"https://www.889100.com/",grades:["elementary","junior"],type:"少人数指導",style:["基礎力","習慣"],summary:"プリント×反復で“できる”を積み重ねるスタイル。急に成績を爆上げ…というより、じわっと底上げ。低学年〜中学の基礎固めに向いています。",access:"駅徒歩12分",img:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:12,brand:"公文式",name:"公文式 豊洲3丁目教室",slug:"kumon-toyosu3",location:"豊洲3丁目",rating:3.1,priceFrom:7700,priceText:"7,700円〜",url:"https://www.kumon.ne.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["自学自習","プリント"],summary:"自分でどんどん進める子にはハマる方式。小さな積み上げが自信につながりやすい。計算・読みの基礎体力づくりに強い印象です。",access:"駅徒歩10分",img:"https://images.unsplash.com/photo-1596496050827-8299e0220de1?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:13,brand:"栄光ゼミナール",name:"栄光ゼミナール 豊洲4丁目校",slug:"eikoh-toyosu4",location:"豊洲4丁目",rating:4.1,priceFrom:15400,priceText:"15,400円〜",url:"https://www.eikoh-seminar.com/",grades:["elementary","junior","high"],type:"集団指導",style:["個別フォロー","中学受験"],summary:"クラスサイズが大きすぎないので、先生の目が届きやすい。質問しやすい雰囲気で、取りこぼしの拾い直しがしやすいのが魅力。",access:"駅徒歩8分",img:"https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:14,brand:"明光義塾",name:"明光義塾 豊洲2丁目教室",slug:"meiko-toyosu2",location:"豊洲2丁目",rating:3.9,priceFrom:12800,priceText:"12,800円〜",url:"https://www.meikogijuku.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["小規模","柔軟"],summary:"学習面談や振り返りシートで“今どこにいるか”が見えやすい。予定変更にも柔軟で、忙しいご家庭でも続けやすい印象です。",access:"駅徒歩12分",img:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:15,brand:"個別教室のトライ",name:"個別教室のトライ 豊洲5丁目校",slug:"try-toyosu5",location:"豊洲5丁目",rating:3.3,priceFrom:14800,priceText:"14,800円〜",url:"https://www.kobekyo.com/",grades:["elementary","junior","high"],type:"個別指導",style:["1対1","抑えめ料金"],summary:"まずは1対1を体験してみたい…という時に選びやすい価格帯。苦手だけピンポイントで補強、もやりやすい。駅から少し歩くので通学ルートは要確認。",access:"駅徒歩15分",img:"https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:16,brand:"東京個別指導学院",name:"東京個別指導学院 豊洲教室",slug:"tkg-toyosu",location:"豊洲3丁目",rating:4.0,priceFrom:17600,priceText:"17,600円〜",url:"https://www.tkg-jp.com/",grades:["elementary","junior","high"],type:"個別指導",style:["1対2","柔軟"],summary:"講師と相性を合わせやすく、時間変更にも強いタイプ。定期テスト〜受験まで幅広く“穴埋め”がしやすいです。",access:"駅徒歩7分",img:"https://images.unsplash.com/photo-1503676367288-45e48ab332ed?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:17,brand:"ナビ個別指導学院",name:"ナビ個別指導学院 豊洲校",slug:"navi-toyosu",location:"豊洲1丁目",rating:3.5,priceFrom:9900,priceText:"9,900円〜",url:"https://www.navi-school.com/",grades:["elementary","junior","high"],type:"個別指導",style:["1対2","学校準拠"],summary:"学校のワーク連動で“宿題の質”を上げやすい。まずは基礎固めから始めたいときに。",access:"駅徒歩6分",img:"https://images.unsplash.com/photo-1513258496099-48168024aec0?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:18,brand:"スクールIE",name:"スクールIE 豊洲校",slug:"ie-toyosu",location:"豊洲4丁目",rating:3.8,priceFrom:13200,priceText:"13,200円〜",url:"https://www.schoolie-net.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["個性別指導","定期対策"],summary:"性格・学習タイプ診断で“合う勉強法”を提案。やり方がハマると一気に回りはじめます。",access:"駅徒歩5分",img:"https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:19,brand:"個別指導Axis",name:"個別指導Axis 豊洲校",slug:"axis-toyosu",location:"豊洲2丁目",rating:3.6,priceFrom:12100,priceText:"12,100円〜",url:"https://axis-kobetsu.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["1対1","基礎〜受験"],summary:"映像＋個別の併用もしやすく、科目ごとに調整しやすいのが◎。苦手補強の最初の一手に。",access:"駅徒歩6分",img:"https://images.unsplash.com/photo-1531482615713-2afd69097998?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:20,brand:"ena",name:"ena 豊洲校",slug:"ena-toyosu",location:"豊洲5丁目",rating:3.7,priceFrom:9900,priceText:"9,900円〜",url:"https://www.ena.co.jp/",grades:["elementary","junior"],type:"集団指導",style:["都立中対策","高校受験"],summary:"都立中・都立高対策が得意。記述・作文の書き方を丁寧に積み上げたい子に。",access:"駅徒歩8分",img:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:21,brand:"日能研",name:"日能研 豊洲校",slug:"niko-toyosu",location:"豊洲3丁目",rating:4.3,priceFrom:19800,priceText:"19,800円〜",url:"https://www.nichinoken.co.jp/",grades:["elementary"],type:"集団指導",style:["中学受験","体系学習"],summary:"テキストが体系的で復習がしやすい。コツコツ型の子が安定して伸びやすい印象です。",access:"駅徒歩7分",img:"https://images.unsplash.com/photo-1460518451285-97b6aa326961?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:22,brand:"市進学院",name:"市進学院 豊洲教室",slug:"ichishin-toyosu",location:"豊洲2丁目",rating:3.6,priceFrom:15180,priceText:"15,180円〜",url:"https://www.ichishin.co.jp/",grades:["elementary","junior"],type:"集団指導",style:["定期対策","受験基礎"],summary:"“戻り学習”がしやすいカリキュラム。苦手単元を見直しながら受験基礎を固めます。",access:"駅徒歩6分",img:"https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:23,brand:"代々木個別指導学院",name:"代々木個別指導学院 豊洲校",slug:"yoyogi-toyosu",location:"豊洲6丁目",rating:3.4,priceFrom:11000,priceText:"11,000円〜",url:"https://www.yoyogi-group.com/",grades:["elementary","junior","high"],type:"個別指導",style:["1対2","定期テスト"],summary:"部活生でも通いやすい時間設定。提出物やワーク管理を一緒に回したい子に合います。",access:"駅徒歩10分",img:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:24,brand:"武田塾",name:"武田塾 豊洲校",slug:"takeda-toyosu",location:"豊洲4丁目",rating:4.0,priceFrom:33000,priceText:"33,000円〜",url:"https://www.takeda.tv/",grades:["high"],type:"個別指導",style:["逆転合格","自学管理"],summary:"“授業をしない”で有名。徹底した自学管理で、参考書ルートを固めるタイプの受験に。",access:"駅徒歩7分",img:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:25,brand:"ビザビ",name:"栄光の個別ビザビ 豊洲校",slug:"visavis-toyosu",location:"豊洲4丁目",rating:4.0,priceFrom:16500,priceText:"16,500円〜",url:"https://www.eikoh-vis-a-vis.com/",grades:["elementary","junior"],type:"個別指導",style:["栄光系","中学受験"],summary:"栄光ゼミの個別版。集団と個別の併用で“弱点穴埋め”がしやすいのが魅力です。",access:"駅徒歩6分",img:"https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:26,brand:"早稲田アカデミー個別進学館",name:"早稲田アカデミー個別進学館 豊洲校",slug:"waseda-kobetsu-toyosu",location:"豊洲3丁目",rating:3.9,priceFrom:22000,priceText:"22,000円〜",url:"https://www.waseda-ac.co.jp/kobetsu/",grades:["elementary","junior","high"],type:"個別指導",style:["中学受験","高校受験"],summary:"集団の熱量を保ちつつ、個別で弱点を補強。志望校別の微調整がしやすいです。",access:"駅徒歩8分",img:"https://images.unsplash.com/photo-1531482615713-2afd69097998?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:27,brand:"TOMAS",name:"TOMAS 豊洲校",slug:"tomas-toyosu",location:"豊洲2丁目",rating:4.4,priceFrom:39600,priceText:"39,600円〜",url:"https://www.tomas.co.jp/",grades:["elementary","junior","high"],type:"個別指導",style:["完全1対1","受験対策"],summary:"ホワイトボード個室の完全1対1。志望校から逆算して“要点だけ”を高速で詰めます。",access:"駅徒歩4分",img:"https://images.unsplash.com/photo-1460518451285-97b6aa326961?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:28,brand:"河合塾マナビス",name:"河合塾マナビス 豊洲校",slug:"manavis-toyosu",location:"豊洲2丁目",rating:3.8,priceFrom:26400,priceText:"26,400円〜",url:"https://www.manavis.com/",grades:["high"],type:"映像",style:["大学受験","映像授業"],summary:"映像×アドバイスタイムで勉強の“詰まり”を解消。部活と両立したい高3生に。",access:"駅徒歩5分",img:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:29,brand:"Eikoh LiNKs",name:"Eikoh LiNKs 豊洲校",slug:"eikoh-links-toyosu",location:"豊洲4丁目",rating:4.0,priceFrom:15400,priceText:"15,400円〜",url:"https://www.eikoh-seminar.com/links/",grades:["elementary","junior"],type:"個別指導",style:["AI活用","1対1"],summary:"AI演習で“苦手だけ”を効率回収。集団と個別の橋渡し役としても使いやすいです。",access:"駅徒歩6分",img:"https://images.unsplash.com/photo-1509062522246-3755977927d7?w=600&h=338&fit=crop",reviews:[] },
  { originalRank:30,brand:"トライプラス",name:"個別指導トライプラス 豊洲校",slug:"tryplus-toyosu",location:"豊洲5丁目",rating:3.5,priceFrom:13200,priceText:"13,200円〜",url:"https://www.try-plus.com/",grades:["elementary","junior","high"],type:"個別指導",style:["1対2","学校準拠"],summary:"価格を抑えつつ個別でしっかり。まずは提出物管理と小テストの点数アップから！",access:"駅徒歩9分",img:"https://images.unsplash.com/photo-1513258496099-48168024aec0?w=600&h=338&fit=crop",reviews:[] }
];

/* ===== デフォルト一言 ===== */
const defaultNotes = {
  "eikoh-toyosu":"教室長のフォローが丁寧。宿題はやや多めでも“回し方”を決めると負担が下がりました。自習室をうまく使える子は伸びが速いです。",
  "meiko-toyosu":"振替が柔軟で部活っ子でも続けやすい。面談がこまめなので“今の弱点”が親にも見えやすいのが安心。",
  "sapix-toyosu":"演習量が圧倒的。合う子は一気に伸びます。家庭では“翌日15分×小分け復習”が効きました。",
  "toshin-toyosu":"映像＋担任指導でペース管理が明確。アプリ管理に抵抗がないタイプに向き。朝やスキマ時間の使い方がカギ。",
  "waseda-toyosu":"授業の熱量で前向きに。課題は多めなので“終わらせる曜日”を固定すると回しやすいです。",
  "try-toyosu":"1対1で理解度に合わせて微調整。AI診断の見える化が便利。小さな達成を積むと継続しやすい印象。",
  "rinkai-toyosu":"定期テスト対策が具体的。提出物の管理まで寄り添いあり。内申アップを狙う時期に◎。",
  "yotsuya-toyosu":"段階別で戻り学習がしやすい設計。科目ごとの凹凸がある子でも歩幅調整しやすいのが良いところ。",
  "morijuku-toyosu":"1対2で基礎の定着をしっかり。応用は宿題で一工夫するとスムーズ。費用感も穏やかで始めやすいです。",
  "standard-toyosu":"まずは学習習慣づけに。価格が抑えめで“週のリズム”を作る用途に相性が良いと感じました。",
  "gakken-toyosu":"プリント反復で“できた”を積み上げ。低学年〜中学の基礎づくりに向き。焦らずコツコツタイプに◎。",
  "kumon-toyosu3":"自学で進めたい子に。計算・読みの土台作りで小さな成功体験を積めるのが魅力。",
  "eikoh-toyosu4":"質問しやすい空気で取りこぼしを拾いやすい。中受の基礎固め期にハマると強いです。",
  "meiko-toyosu2":"面談と振り返りで現在地が見えやすい。予定変更にも強く、忙しい時期も続けやすい。",
  "try-toyosu5":"1対1を“お試し”しやすい価格帯。苦手単元だけピンポイントで補強する使い方が合います。",
  "tkg-toyosu":"講師の相性合わせが丁寧。定期〜受験まで穴埋めがしやすい万能型の個別という印象。",
  "navi-toyosu":"学校ワーク連動で宿題の質を上げやすい。まずは基礎と提出物の管理から整えたいご家庭に。",
  "ie-toyosu":"学習タイプ診断で“合うやり方”を提案。やり方がハマると一気に回り始めます。",
  "axis-toyosu":"映像＋個別の併用がしやすい。科目ごとの調整が効くので苦手補補強の最初の一手に。",
  "ena-toyosu":"都立中・都立高対策に強み。作文・記述を丁寧に積み上げたい子に向きます。",
  "niko-toyosu":"体系的なテキストで復習がしやすい。コツコツ型の子が安定して伸びやすい印象。",
  "ichishin-toyosu":"“戻り学習”で苦手単元の見直しがしやすい。基礎の底上げを狙いたい時に。",
  "yoyogi-toyosu":"提出物・ワーク管理まで伴走。部活生でも通いやすい時間設計が助かります。",
  "takeda-toyosu":"“授業をしない”で有名。徹底した自学管理が合う子は伸びが速い。参考書ルートの固定がポイント。",
  "visavis-toyosu":"栄光ゼミの個別版。集団と個別の併用で弱点の穴埋めがしやすいのが魅力。",
  "waseda-kobetsu-toyosu":"集団の熱量＋個別の微調整。志望校別の細かい調整に強いと感じました。",
  "tomas-toyosu":"完全1対1で濃度が高い。志望校から逆算して“要点だけ”を詰める戦略がハマります。",
  "manavis-toyosu":"映像×アドバイスで詰まりを解消。部活と両立したい高3生に相性◎。",
  "eikoh-links-toyosu":"AI演習で“苦手だけ”を効率回収。集団と個別の橋渡し役として使いやすいです。",
  "tryplus-toyosu":"価格を抑えつつ個別でしっかり。提出物管理と小テストの積み上げからスタートが吉。"
};

/* ===== 一言コメントの保存領域 ===== */
let authorNotes = loadNotes();

/* ===== State ===== */
const PAGE_SIZE=5;
const state={grade:"all",type:"all",location:"all",hideLow:false,sort:"rank",dynamicRank:true,visibleCount:PAGE_SIZE};
const typeSynonyms={"個別指導":["個別指導","個別","1対1","1対2"],"集団指導":["集団指導","集団"],"少人数指導":["少人数指導","少人数"],"ハイブリッド":["ハイブリッド","ハイブリ","個別+集団"],"映像":["映像","映像授業"]};
const locationPairs={ pair12:["豊洲1丁目","豊洲2丁目"], pair34:["豊洲3丁目","豊洲4丁目"], pair56:["豊洲5丁目","豊洲6丁目"] };
let lastFiltered=[];

document.addEventListener('DOMContentLoaded',()=>{
  // Admin tools
  if(EDIT_MODE){
    const tools=$id('adminTools');
    if(tools){ tools.style.display='block'; tools.setAttribute('aria-hidden','false'); }
    $id('exportNotesBtn')?.addEventListener('click',exportNotes);
    $id('importNotesBtn')?.addEventListener('click',importNotes);
    $id('clearNotesBtn')?.addEventListener('click',clearAllNotes);
    document.addEventListener('click',onInlineNoteButtons);
  }

  bindFilterRows();
  bindControls();
  render();

  const scrollBtn=$id('scrollToList');
  const listSectionEl=$id('listSection');
  if(scrollBtn && listSectionEl){
    scrollBtn.onclick=()=>listSectionEl.scrollIntoView({behavior:'smooth'});
  }
});

/* Filters */
function bindFilterRows(){
  document.querySelectorAll('.chip-row').forEach(row=>{
    row.addEventListener('click',e=>{
      const chip=e.target.closest('.chip'); if(!chip)return;
      row.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
      chip.classList.add('active');
      state[row.dataset.filter]=chip.dataset.value;
      state.visibleCount=PAGE_SIZE;
      render();
    });
  });
}

/* Controls（load more のみ） */
function bindControls(){
  $id('loadMoreBtn')?.addEventListener('click',()=>{
    state.visibleCount+=PAGE_SIZE;
    render(false);
  });
}

/* Render */
function render(recompute=true){
  const listEl=$id('list'), noEl=$id('noResults'), errEl=$id('errorBox'), metaEl=$id('meta'), loadMoreEl=$id('loadMoreBtn');
  if(!listEl || !noEl || !errEl || !metaEl){ return; }
  errEl.style.display='none';
  if(recompute){
    try{ lastFiltered=data.filter(matchFilters); sortItems(lastFiltered); }
    catch(e){
      errEl.textContent='エラーが出ちゃいました…もう一度読み込んでみてください（詳細：'+e.message+'）';
      errEl.style.display='block'; return;
    }
  }
  const slice=lastFiltered.slice(0,state.visibleCount);
  listEl.innerHTML='';
  if(!slice.length){ noEl.style.display='block'; }
  else{
    noEl.style.display='none';
    const frag=document.createDocumentFragment();
    slice.forEach(item=>{
      const displayRank=state.dynamicRank?(lastFiltered.indexOf(item)+1):item.originalRank;
      frag.appendChild(buildCard(item,displayRank));
    });
    listEl.appendChild(frag);
  }
  if(loadMoreEl){
    if(state.visibleCount<lastFiltered.length){
      loadMoreEl.style.display='inline-block';
      loadMoreEl.textContent=`もっと見る（+${Math.min(PAGE_SIZE,lastFiltered.length-state.visibleCount)}件）`;
    }else{
      loadMoreEl.style.display='none';
    }
  }
  metaEl.textContent=`表示 ${slice.length}/${lastFiltered.length} 件｜全${data.length}件中。学年=${state.grade}／形態=${state.type}／エリア=${locationLabel(state.location)}`;
}

/* Helpers */
function matchFilters(d){
  if(state.grade!=='all' && !d.grades.includes(state.grade)) return false;
  if(state.type!=='all'){
    const syn=typeSynonyms[state.type]||[state.type];
    if(!syn.some(s=>d.type.includes(s))) return false;
  }
  if(state.location!=='all'){
    const loc=d.location;
    if(locationPairs[state.location]){
      if(!locationPairs[state.location].includes(loc)) return false;
    }else{
      if(loc!==state.location) return false;
    }
  }
  if(state.hideLow && d.rating<3.3) return false;
  return true;
}
function sortItems(arr){
  arr.sort((a,b)=>{
    switch(state.sort){
      case 'rank': return a.originalRank-b.originalRank;
      case 'rating': return b.rating-a.rating;
      case 'priceLow': return a.priceFrom-b.priceFrom;
      case 'priceHigh': return b.priceFrom-a.priceFrom;
      default: return 0;
    }
  });
}
function nl2brSafe(str){return escapeHtml(str).replace(/\n/g,'<br>');}
function escapeHtml(str){
  return String(str).replace(/[&<>"']/g, s => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
  })[s]);
}
function truncate(str,len){return str.length>len?str.slice(0,len-1)+'…':str;}
function formatGrades(gs){const map={elementary:'小',junior:'中',high:'高'};return gs.map(g=>map[g]||g).join('・');}
function locationLabel(v){
  switch(v){
    case 'all': return '全域';
    case 'pair12': return '1・2丁目';
    case 'pair34': return '3・4丁目';
    case 'pair56': return '5・6丁目';
    default: return v;
  }
}
/* 料金の段階表示（小/中/大） */
function priceSizeLabel(priceFrom){
  const p = Number(priceFrom||0);
  if(p <= 12000) return '小';
  if(p <= 20000) return '中';
  return '大';
}

/* Card */
function buildCard(d,displayRank){
  const isTop3 = displayRank <= 3;
  const tier = isTop3 ? 'S' : displayRank <= 10 ? 'A' : displayRank <= 20 ? 'B' : 'C';
  const card=document.createElement('article');
  card.className='card clickable'+(isTop3?' top3':'');
  card.setAttribute('role','listitem');
  card.setAttribute('data-tier',tier);

  const level=d.rating>=4.2?'high':d.rating>=3.6?'mid':'low';
  const showSub=state.dynamicRank && displayRank!==d.originalRank;
  const revs=d.reviews||[];
  const snippets=revs.slice().sort((a,b)=>new Date(b.date)-new Date(a.date)).slice(0,3);
  const note = (authorNotes[d.slug] ?? defaultNotes[d.slug] ?? generateTemplate(d));
  const priceSize = priceSizeLabel(d.priceFrom);

  card.innerHTML=`
    <div class="rank-badge ${isTop3?'rank-top-3':''}" title="公式順位: ${d.originalRank}">
      <div class="rank-num"><span>${displayRank}位</span>${isTop3?'<span class="crown" aria-hidden="true">👑</span>':''}</div>
      ${showSub?`<small>公式${d.originalRank}</small>`:''}
    </div>
    <div class="thumb-wrap">${d.img?`<img src="${d.img}" alt="${escapeHtml(d.name)} 外観" loading="lazy" decoding="async">`:''}</div>
    <div class="brand-line"><span class="dot" aria-hidden="true">●</span>${escapeHtml(d.brand)}</div>
    <h3 class="juku-name">${escapeHtml(d.name)}</h3>
    <div class="rating-row">
      <span class="rating-pill" data-level="${level}" title="評価 ${d.rating.toFixed(1)}">★ ${d.rating.toFixed(1)}</span>
      <span aria-hidden="true" style="font-size:1.05rem;letter-spacing:.02em">${d.rating>=4.5?'⭐⭐⭐⭐⭐':d.rating>=4.0?'⭐⭐⭐⭐☆':'⭐⭐⭐☆☆'}</span>
    </div>
    <p class="summary">${escapeHtml(d.summary)}</p>

    <div class="author-note">
      <span class="badge"><span aria-hidden="true">✍️</span> 私からの一言</span>
      <div class="text">${nl2brSafe(note)}</div>
    </div>

    ${EDIT_MODE?`
      <button class="note-edit-btn" data-edit-note="${d.slug}">${authorNotes[d.slug]?'✏️ 一言を編集':'＋ 一言を追加'}</button>
    `:''}

    ${snippets.length?renderSnippets(snippets):''}

    <div class="tags">
      <span class="tag"><span aria-hidden="true">📍</span>${escapeHtml(d.location)}</span>
      ${d.grades.includes('elementary')?'<span class="tag"><span aria-hidden="true">🧒</span>小</span>':''}
      ${d.grades.includes('junior')?'<span class="tag"><span aria-hidden="true">👦</span>中</span>':''}
      ${d.grades.includes('high')?'<span class="tag"><span aria-hidden="true">🎓</span>高</span>':''}
      ${d.style.map(s=>`<span class="tag"><span aria-hidden="true">🏷️</span>${escapeHtml(s)}</span>`).join('')}
    </div>

    <div class="spec-grid">
      <div class="spec"><strong><span class="icon" aria-hidden="true">🚶</span>アクセス</strong><span>${escapeHtml(d.access||'-')}</span></div>
      <div class="spec"><strong><span class="icon" aria-hidden="true">🎒</span>対象</strong><span>${escapeHtml(formatGrades(d.grades))}</span></div>
      <div class="spec"><strong><span class="icon" aria-hidden="true">🧭</span>形態</strong><span>${escapeHtml(d.type)}</span></div>
      <div class="spec"><strong><span class="icon" aria-hidden="true">💴</span>料金</strong><span>${priceSize}</span></div>
    </div>

    <div class="actions">
      <a href="${d.url || '#'}" target="_blank" rel="noopener noreferrer" class="link-btn primary cta-pricing" aria-label="${escapeHtml(d.name)} 料金詳細はコチラ">
        <span class="icon" aria-hidden="true">🔗</span>料金詳細はコチラ <span class="icon" aria-hidden="true">↗</span>
      </a>
    </div>`;

  // カード全体クリックで公式サイト（フォーム操作やリンクは除外）
  card.addEventListener('click',(e)=>{
    if(e.defaultPrevented) return;
    if(e.target.closest('a,button,textarea,input,select,label')) return;
    if(d.url){ window.open(d.url,'_blank','noopener'); }
  });

  return card;
}

/* 口コミスニペット */
function renderSnippets(snips){
  let html=`<div class="review-snippets">`;
  snips.forEach(s=>{
    html+=`
      <div class="snip">
        <div class="snip-head">
          <span>${escapeHtml(s.author)}</span>
          <span class="star">★${s.rating}</span>
          <time datetime="${s.date}">${s.date}</time>
        </div>
        <div class="snip-body">${escapeHtml(truncate(s.text,74))}</div>
      </div>`;
  });
  html+=`</div>`;
  return html;
}

/* ===== 一言コメントのインライン編集（編集モード時） ===== */
function onInlineNoteButtons(e){
  const editBtn = e.target.closest('[data-edit-note]');
  if(editBtn){
    e.preventDefault(); e.stopPropagation();
    const slug = editBtn.dataset.editNote;
    const card = editBtn.closest('.card');
    const existingEditor = card.querySelector('.note-inline-editor');
    if(existingEditor){ existingEditor.remove(); }

    const editor = document.createElement('div');
    editor.className='note-inline-editor';
    editor.innerHTML=`
      <textarea>${escapeHtml(authorNotes[slug]||'')}</textarea>
      <div class="buttons">
        <button class="btn" data-template-note="${slug}">ひな形挿入</button>
        <button class="btn primary" data-save-note="${slug}">保存</button>
        <button class="btn" data-cancel-note>キャンセル</button>
        ${authorNotes[slug]?'<button class="btn danger" data-delete-note="'+slug+'">削除</button>':''}
      </div>
      <div class="small" style="color:#6a5a50">ヒント：3行（対象/注意/コツ）でまとめると読みやすいです。</div>
    `;
    editBtn.insertAdjacentElement('afterend', editor);
    editor.querySelector('textarea')?.focus();
    return;
  }

  const tmpl = e.target.closest('[data-template-note]');
  if(tmpl){
    e.preventDefault(); e.stopPropagation();
    const slug = tmpl.dataset.templateNote;
    const d = data.find(x=>x.slug===slug);
    const editor = tmpl.closest('.note-inline-editor');
    if(d && editor){
      const ta = editor.querySelector('textarea');
      ta.value = generateTemplate(d);
      ta.focus();
    }
    return;
  }

  const saveBtn = e.target.closest('[data-save-note]');
  if(saveBtn){
    e.preventDefault(); e.stopPropagation();
    const slug = saveBtn.dataset.saveNote;
    const editor = saveBtn.closest('.note-inline-editor');
    const text = editor.querySelector('textarea').value.trim();
    if(text){ authorNotes[slug]=text; } else { delete authorNotes[slug]; }
    saveNotes();
    render(false);
    return;
  }

  if(e.target.closest('[data-cancel-note]')){
    e.preventDefault(); e.stopPropagation();
    e.target.closest('.note-inline-editor')?.remove();
    return;
  }

  const delBtn = e.target.closest('[data-delete-note]');
  if(delBtn){
    e.preventDefault(); e.stopPropagation();
    const slug = delBtn.dataset.deleteNote;
    if(confirm('この「一言コメント」を削除しますか？')){
      delete authorNotes[slug];
      saveNotes();
      render(false);
    }
    return;
  }
}

/* 自動ひな形生成（不足時のフォールバック用） */
function generateTemplate(d){
  const target = `${formatGrades(d.grades)}・${d.type}`;
  const strong = (d.style && d.style.length)? d.style[0] : (d.type||'指導');
  const caution = d.type.includes('集団') ? '課題量' : d.type.includes('個別') ? '振替/スケジュール' : '負担感';
  const trick = d.type.includes('映像') ? '視聴ペースと復習タイミング' : '復習の曜日と時間帯';
  return `【対象】${target}に合う印象。${強みstrong}が安心材料でした。
【注意】${caution}は「固定の曜日・時間」を決める工夫で吸収可能。
【コツ】${trick}を先に決めると進みが安定。`;
}

/* ===== Notes storage, export/import ===== */
function loadNotes(){
  try{
    const raw=localStorage.getItem(NOTE_STORAGE_KEY);
    return raw? JSON.parse(raw) : {};
  }catch{ return {}; }
}
function saveNotes(){
  localStorage.setItem(NOTE_STORAGE_KEY, JSON.stringify(authorNotes));
}
async function exportNotes(){
  const json = JSON.stringify(authorNotes, null, 2);
  try{
    await navigator.clipboard.writeText(json);
    alert('クリップボードにコピーしました！\n（JSONを保管しておくと引っ越しも安心です）');
  }catch{
    prompt('コピーできない環境です。下のJSONを手動でコピーしてください。', json);
  }
}
function importNotes(){
  const raw = prompt('JSONを貼り付けてください（現在のデータは上書きされます）','{}');
  if(!raw) return;
  try{
    const obj = JSON.parse(raw);
    if(typeof obj !== 'object' || Array.isArray(obj)) throw new Error('形式が正しくありません');
    if(!confirm('インポートすると既存の「一言コメント」は上書きされます。よろしいですか？')) return;
    authorNotes = obj;
    saveNotes();
    render();
    alert('インポートしました！');
  }catch(e){
    alert('読み込みに失敗しました：'+e.message);
  }
}
function clearAllNotes(){
  if(!confirm('全ての「一言コメント」を削除しますか？この操作は元に戻せません。')) return;
  authorNotes = {};
  saveNotes();
  render();
  alert('すべて削除しました。');
}

/* Detail 残置（未使用） */
const closeDetail=$id('closeDetail');
closeDetail?.addEventListener('click',()=>{ 
  const overlay=$id('detailOverlay');
  if(overlay){ overlay.style.display='none'; overlay.setAttribute('aria-hidden','true'); }
});
</script>
</body>
</html>
